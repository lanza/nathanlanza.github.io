<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Some iOS Table View Patterns</title>
  <meta name="description" content="I plan on making a series of posts regarding some patterns I like to use while writing iOS apps ranging from UITableViews and their delegates/datasources, re...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="http://localhost:4000/swift,/ios/2016/11/10/iOS-table-view-patterns.html">
  <link rel="alternate" type="application/rss+xml" title="Nathan Lanza" href="http://localhost:4000/feed.xml">
</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="/">Nathan Lanza</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
        
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
          <a class="page-link" href="/about/">About</a>
          
        
          
          <a class="page-link" href="/portfolio/">Portfolio</a>
          
        
          
          <a class="page-link" href="/lookingforajob/">Looking for a job!</a>
          
        
          
        
      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">Some iOS Table View Patterns</h1>
    <p class="post-meta"><time datetime="2016-11-10T11:00:00-05:00" itemprop="datePublished">Nov 10, 2016</time></p>
  </header>

  <div class="post-content" itemprop="articleBody">
  <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <p>I plan on making a series of posts regarding some patterns I like to use while writing iOS apps ranging from <code class="highlighter-rouge">UITableViews</code> and their delegates/datasources, reuse of classes using generics, and navigation flow. Today, I’ll start with <code class="highlighter-rouge">UITableViews.</code></p>

<h4 id="uitableview">UITableView</h4>

<p>Let’s start with a basic view controller. I’ll write everything out using just code for clarities sake.</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="kd">class</span> <span class="kt">MyTableViewController</span><span class="p">:</span> <span class="kt">UIViewController</span> <span class="p">{</span>
  <span class="k">let</span> <span class="nv">tableView</span> <span class="o">=</span> <span class="kt">UITableView</span><span class="p">(</span><span class="nv">frame</span><span class="p">:</span> <span class="kt">CGRect</span><span class="o">.</span><span class="n">zero</span><span class="p">,</span> <span class="nv">style</span><span class="p">:</span> <span class="o">.</span><span class="n">plain</span><span class="p">)</span>
<span class="p">}</span></code></pre></figure>

<p>I like to abstract out the <code class="highlighter-rouge">UITableViewDataSource</code> and <code class="highlighter-rouge">UITableViewDelegate</code> into a seperate class for reusability’s and avoiding code repetition.</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="kd">class</span> <span class="kt">DataSource</span><span class="o">&lt;</span><span class="kt">Provider</span><span class="p">:</span> <span class="kt">DataProvider</span><span class="p">,</span> <span class="kt">Cell</span><span class="p">:</span> <span class="kt">UITableViewCell</span><span class="o">&gt;</span><span class="p">:</span> <span class="kt">NSObject</span><span class="p">,</span> <span class="kt">UITableViewDataSource</span><span class="p">,</span> <span class="kt">UITableViewDelegate</span> <span class="k">where</span> <span class="kt">Cell</span><span class="p">:</span> <span class="kt">ConfigurableCell</span><span class="p">,</span> <span class="kt">Provider</span><span class="o">.</span><span class="kt">Object</span> <span class="o">==</span> <span class="kt">Cell</span><span class="o">.</span><span class="kt">Object</span> <span class="p">{</span>
  <span class="c1">// will fill out shortly</span>
<span class="p">}</span></code></pre></figure>

<p>First, you’ll notice that it’s doubly generic over two types: <code class="highlighter-rouge">Provider</code> which is of the type <code class="highlighter-rouge">DataProvider</code> and <code class="highlighter-rouge">Cell</code> which is a simple <code class="highlighter-rouge">UITableViewCell</code> which conforms to <code class="highlighter-rouge">ConfigurableCell</code> (from <code class="highlighter-rouge">where Cell: ConfigurableCell</code>). I’ll go over <code class="highlighter-rouge">ConfigurableCell</code> first.</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="kd">protocol</span> <span class="kt">ConfigurableCell</span> <span class="p">{</span>
  <span class="k">associatedtype</span> <span class="kt">Object</span>
  <span class="kd">static</span> <span class="k">var</span> <span class="nv">identifier</span><span class="p">:</span> <span class="kt">String</span> <span class="p">{</span> <span class="k">get</span> <span class="p">}</span>
  <span class="kd">func</span> <span class="nf">configure</span><span class="p">(</span><span class="k">for</span> <span class="nv">object</span><span class="p">:</span> <span class="kt">Object</span><span class="p">,</span> <span class="n">at</span> <span class="nv">indexPath</span><span class="p">:</span> <span class="kt">IndexPath</span><span class="p">)</span>
<span class="p">}</span>
<span class="kd">class</span> <span class="kt">MyTableViewCell</span><span class="p">:</span> <span class="kt">UITableViewCell</span> <span class="p">{</span> <span class="c1">//customize it here }</span>
<span class="kd">extension</span> <span class="kt">MyTableViewCell</span><span class="p">:</span> <span class="kt">ConfigurableCell</span> <span class="p">{</span>
  <span class="kd">func</span> <span class="nf">configure</span><span class="p">(</span><span class="k">for</span> <span class="nv">object</span><span class="p">:</span> <span class="kt">String</span><span class="p">,</span> <span class="n">at</span> <span class="nv">indexpath</span><span class="p">:</span> <span class="kt">IndexPath</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">textLabel</span><span class="p">?</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">object</span>
    <span class="c1">// some other configuration</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p>The protocol <code class="highlighter-rouge">ConfigurableCell</code> is quite simple, it just states that the cell that conforms to it must implement a function which is used to configure the cell for it’s display. This function will be the sole function called in <code class="highlighter-rouge">cellForRowAtIndexPath</code>. The <code class="highlighter-rouge">associatedtype</code> is a placeholder type for which the cell is designed to be configured to. So, for example, if the data you want to display in your tableView is an <code class="highlighter-rouge">Array</code> of <code class="highlighter-rouge">Book</code>s, your <code class="highlighter-rouge">configure</code> function would be</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="kd">struct</span> <span class="kt">Book</span> <span class="p">{</span>
  <span class="k">let</span> <span class="nv">title</span><span class="p">:</span> <span class="kt">String</span>
  <span class="k">let</span> <span class="nv">author</span><span class="p">:</span> <span class="kt">String</span>
<span class="p">}</span>
<span class="kd">func</span> <span class="nf">configure</span><span class="p">(</span><span class="k">for</span> <span class="nv">object</span><span class="p">:</span> <span class="kt">Book</span><span class="p">,</span> <span class="n">at</span> <span class="nv">indexPath</span><span class="p">:</span> <span class="kt">IndexPath</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">textLabel</span><span class="p">?</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">object</span><span class="o">.</span><span class="n">title</span>
  <span class="n">detailTextLabel</span><span class="p">?</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="s">"By: "</span> <span class="o">+</span> <span class="n">object</span><span class="o">.</span><span class="n">author</span>
<span class="p">}</span></code></pre></figure>

<p>Next, we have the <code class="highlighter-rouge">DataProvider</code> type. This is quite simple. This is just a protocol the holder of the objects you want to display conform to.</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="kd">protocol</span> <span class="kt">DataProvider</span> <span class="p">{</span>
  <span class="k">associatedtype</span> <span class="kt">Object</span>
  <span class="kd">func</span> <span class="nf">numberOfSections</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kt">Int</span>
  <span class="kd">func</span> <span class="nf">numberOfRows</span><span class="p">(</span><span class="nv">inSection</span><span class="p">:</span> <span class="kt">Int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Int</span>
  <span class="kd">func</span> <span class="nf">object</span><span class="p">(</span><span class="n">at</span> <span class="nv">indexPath</span><span class="p">:</span> <span class="kt">IndexPath</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Object</span>
<span class="p">}</span></code></pre></figure>

<p>The purpose of this class is obviously to fill out the reqruied <code class="highlighter-rouge">UITableViewDataSource</code> methods. Further extension of this protocol can provide further functionality such as insertion/removal/append/etc. But we’ll keep it simple here.</p>

<p>A typical type I make is <code class="highlighter-rouge">ArrayProvider</code>:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="kd">class</span> <span class="kt">ArrayProvider</span><span class="o">&lt;</span><span class="k">Type</span><span class="o">&gt;</span><span class="p">:</span> <span class="kt">DataProvider</span> <span class="p">{</span>
  <span class="k">var</span> <span class="nv">objects</span><span class="p">:</span> <span class="p">[</span><span class="k">Type</span><span class="p">]</span>
  <span class="kd">func</span> <span class="nf">numberOfSections</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kt">Int</span> <span class="p">{</span> <span class="k">return</span> <span class="mi">1</span><span class="p">}</span>
  <span class="kd">func</span> <span class="nf">numberOfRows</span><span class="p">(</span><span class="n">inSection</span> <span class="nv">section</span><span class="p">:</span> <span class="kt">Int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Int</span> <span class="p">{</span> <span class="k">return</span> <span class="n">objects</span><span class="o">.</span><span class="n">count</span> <span class="p">}</span>
  <span class="kd">func</span> <span class="nf">object</span><span class="p">(</span><span class="n">at</span> <span class="nv">indexPath</span><span class="p">:</span> <span class="kt">IndexPath</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Object</span> <span class="p">{</span> <span class="k">return</span> <span class="n">objects</span><span class="p">[</span><span class="n">indexPath</span><span class="o">.</span><span class="n">row</span><span class="p">]</span> <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p>Now, we move back to the <code class="highlighter-rouge">DataSource</code>:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="kd">class</span> <span class="kt">DataSource</span><span class="o">&lt;</span><span class="kt">Provider</span><span class="p">:</span> <span class="kt">DataProvider</span><span class="p">,</span> <span class="kt">Cell</span><span class="p">:</span> <span class="kt">UITableViewCell</span><span class="o">&gt;</span><span class="p">:</span> <span class="kt">NSObject</span><span class="p">,</span> <span class="kt">UITableViewDataSource</span><span class="p">,</span> <span class="kt">UITableViewDelegate</span> <span class="k">where</span> <span class="kt">Cell</span><span class="p">:</span> <span class="kt">ConfigurableCell</span><span class="p">,</span> <span class="kt">Provider</span><span class="o">.</span><span class="kt">Object</span> <span class="o">==</span> <span class="kt">Cell</span><span class="o">.</span><span class="kt">Object</span> <span class="p">{</span>

  <span class="k">let</span> <span class="nv">provider</span><span class="p">:</span> <span class="kt">Provider</span>
  <span class="k">let</span> <span class="nv">tableView</span><span class="p">:</span> <span class="kt">UITableView</span>

  <span class="nf">init</span><span class="p">(</span><span class="nv">tableView</span><span class="p">:</span> <span class="kt">UITableView</span><span class="p">,</span> <span class="nv">provider</span><span class="p">:</span> <span class="kt">Provider</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">self</span><span class="o">.</span><span class="n">tableView</span> <span class="o">=</span> <span class="n">tableView</span>
    <span class="k">self</span><span class="o">.</span><span class="n">provider</span> <span class="o">=</span> <span class="n">provider</span>
    <span class="k">super</span><span class="o">.</span><span class="nf">init</span><span class="p">()</span>

    <span class="nf">setup</span><span class="p">()</span>
  <span class="p">}</span>

  <span class="kd">func</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">tableView</span><span class="o">.</span><span class="n">dataSource</span> <span class="o">=</span> <span class="k">self</span>
    <span class="n">tableView</span><span class="o">.</span><span class="n">delegate</span> <span class="o">=</span> <span class="k">self</span>
    <span class="n">tableView</span><span class="o">.</span><span class="nf">register</span><span class="p">(</span><span class="kt">Cell</span><span class="o">.</span><span class="k">self</span><span class="p">,</span> <span class="nv">forReuseIdentifier</span><span class="p">:</span> <span class="kt">Cell</span><span class="o">.</span><span class="n">identifier</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="kd">func</span> <span class="nf">numberOfSections</span><span class="p">(</span><span class="k">in</span> <span class="nv">tableView</span><span class="p">:</span> <span class="kt">UITableView</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Int</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">provider</span><span class="o">.</span><span class="nf">numberOfSections</span><span class="p">()</span>
  <span class="p">}</span>
  <span class="kd">func</span> <span class="nf">tableView</span><span class="p">(</span><span class="n">_</span> <span class="nv">tableView</span><span class="p">:</span> <span class="kt">UITableView</span><span class="p">,</span> <span class="n">numberOfRowsInSection</span> <span class="nv">section</span><span class="p">:</span> <span class="kt">Int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Int</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">provider</span><span class="o">.</span><span class="nf">numberOfItems</span><span class="p">(</span><span class="nv">in</span><span class="p">:</span> <span class="n">section</span><span class="p">)</span>
  <span class="p">}</span>
  <span class="kd">func</span> <span class="nf">tableView</span><span class="p">(</span><span class="n">_</span> <span class="nv">tableView</span><span class="p">:</span> <span class="kt">UITableView</span><span class="p">,</span> <span class="n">cellForRowAt</span> <span class="nv">indexPath</span><span class="p">:</span> <span class="kt">IndexPath</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">UITableViewCell</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">cell</span> <span class="o">=</span> <span class="n">tableView</span><span class="o">.</span><span class="nf">dequeueReusableCell</span><span class="p">(</span><span class="nv">withIdentifier</span><span class="p">:</span> <span class="kt">Cell</span><span class="o">.</span><span class="n">identifier</span><span class="p">,</span> <span class="nv">for</span><span class="p">:</span> <span class="n">indexPath</span><span class="p">)</span> <span class="k">as!</span> <span class="kt">Cell</span>
    <span class="k">let</span> <span class="nv">object</span> <span class="o">=</span> <span class="n">provider</span><span class="o">.</span><span class="nf">object</span><span class="p">(</span><span class="nv">at</span><span class="p">:</span> <span class="n">indexPath</span><span class="p">)</span>
    <span class="n">cell</span><span class="o">.</span><span class="nf">configure</span><span class="p">(</span><span class="nv">for</span><span class="p">:</span> <span class="n">object</span><span class="p">,</span> <span class="nv">at</span><span class="p">:</span> <span class="n">indexPath</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">cell</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p>Now, the purpose of the <code class="highlighter-rouge">DataSource</code> becomes rather clear. You feed it a <code class="highlighter-rouge">UITableView</code> and a <code class="highlighter-rouge">DataProvider</code> and it handles all the connections. It’s reusable and isolated from the rest of your code. Any further modification can be handled in a variety of ways, but the repetitive boiler plate is isolated and regularized.</p>

<p>A useful subclass I create is a <code class="highlighter-rouge">DataProvider</code> tailored to the aforementioned <code class="highlighter-rouge">ArrayProvider</code>.</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="kd">class</span> <span class="kt">ArrayDataSource</span><span class="o">&lt;</span><span class="k">Type</span><span class="p">,</span><span class="kt">Cell</span><span class="p">:</span> <span class="kt">UITableViewCell</span><span class="o">&gt;</span><span class="p">:</span> <span class="kt">DataSource</span><span class="o">&lt;</span><span class="kt">ArrayProvider</span><span class="o">&lt;</span><span class="k">Type</span><span class="o">&gt;</span><span class="p">,</span><span class="kt">Cell</span><span class="o">&gt;</span> <span class="k">where</span> <span class="kt">Cell</span><span class="p">:</span> <span class="kt">ConfigurableCell</span><span class="p">,</span> <span class="kt">Cell</span><span class="o">.</span><span class="kt">Object</span> <span class="o">==</span> <span class="k">Type</span> <span class="p">{</span>
    <span class="nf">init</span><span class="p">(</span><span class="nv">tableView</span><span class="p">:</span> <span class="kt">UITableView</span><span class="p">,</span> <span class="nv">array</span><span class="p">:</span> <span class="p">[</span><span class="k">Type</span><span class="p">])</span> <span class="p">{</span>
        <span class="k">let</span> <span class="nv">provider</span> <span class="o">=</span> <span class="kt">ArrayProvider</span><span class="p">(</span><span class="nv">array</span><span class="p">:</span> <span class="n">array</span><span class="p">)</span>
        <span class="k">super</span><span class="o">.</span><span class="nf">init</span><span class="p">(</span><span class="nv">tableView</span><span class="p">:</span> <span class="n">tableView</span><span class="p">,</span> <span class="nv">provider</span><span class="p">:</span> <span class="n">provider</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="k">var</span> <span class="nv">objects</span><span class="p">:</span> <span class="p">[</span><span class="k">Type</span><span class="p">]</span> <span class="p">{</span> <span class="k">return</span> <span class="n">provider</span><span class="o">.</span><span class="n">objects</span> <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p>This subclass simply provides an initializer for when your objects are contained in an array so you can use the <code class="highlighter-rouge">ArrayProvider</code> type. To be honest, I’d prefer this be a part of the original <code class="highlighter-rouge">DataSource</code> class, but Swift’s type system doesn’t allow recursive constraints, yet, and that would be a requirement to write an extension where the <code class="highlighter-rouge">where</code> clauses imply recursion. So I simply subclass, for now. (This is a problem I’m running into exceedingly often the more and more I try to use generic code.)</p>

<p>Now, we can finally set up our view controller.</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="kd">class</span> <span class="kt">MyTableViewController</span><span class="p">:</span> <span class="kt">UIViewController</span> <span class="p">{</span>

  <span class="k">let</span> <span class="nv">tableView</span> <span class="o">=</span> <span class="kt">UITableView</span><span class="p">(</span><span class="nv">frame</span><span class="p">:</span> <span class="kt">CGRect</span><span class="o">.</span><span class="n">zero</span><span class="p">,</span> <span class="nv">style</span><span class="p">:</span> <span class="o">.</span><span class="n">plain</span><span class="p">)</span>
  <span class="k">var</span> <span class="nv">dataSource</span><span class="p">:</span> <span class="kt">ArrayDataSource</span><span class="o">&lt;</span><span class="kt">Book</span><span class="p">,</span><span class="kt">MyTableViewCell</span><span class="o">&gt;!</span>


  <span class="k">override</span> <span class="kd">func</span> <span class="nf">viewDidLoad</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">super</span><span class="o">.</span><span class="nf">viewDidLoad</span><span class="p">()</span>

    <span class="k">var</span> <span class="nv">books</span> <span class="o">=</span> <span class="p">[(</span><span class="s">"The Hobbit"</span><span class="p">,</span><span class="s">"Tolkien"</span><span class="p">),(</span><span class="s">"Harry Potter"</span><span class="p">,</span><span class="s">"Rowling"</span><span class="p">)]</span><span class="o">.</span><span class="n">map</span> <span class="p">{</span> <span class="n">book</span> <span class="k">in</span> <span class="kt">Book</span><span class="p">(</span><span class="nv">title</span><span class="p">:</span> <span class="n">book</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span> <span class="nv">author</span><span class="p">:</span> <span class="n">book</span><span class="o">.</span><span class="mi">1</span><span class="p">)</span> <span class="p">}</span>
    <span class="n">dataSource</span> <span class="o">=</span> <span class="kt">ArrayDataSource</span><span class="p">(</span><span class="nv">tableView</span><span class="p">:</span> <span class="n">tableView</span><span class="p">,</span> <span class="nv">array</span><span class="p">:</span> <span class="n">books</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p>And your <code class="highlighter-rouge">UITableView</code> is fully configured with that little amount of code in your view controller. This clearly helps with MassiveViewController syndrome, even if it merely hides the code else where. But it does allow for extremely efficient reusability and customization. Lets say you want to make another view controller to show information about the authors. This is the entirety of the code you have to add:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="kd">struct</span> <span class="kt">Author</span> <span class="p">{</span>
  <span class="k">var</span> <span class="nv">name</span><span class="p">:</span> <span class="kt">String</span>
  <span class="k">var</span> <span class="nv">birthDate</span><span class="p">:</span> <span class="kt">Date</span>
  <span class="k">var</span> <span class="nv">birthDateString</span><span class="p">:</span> <span class="kt">String</span> <span class="p">{</span> <span class="c1">// dateformatter shenanigans }</span>
<span class="p">}</span>
<span class="kd">class</span> <span class="kt">AuthorCell</span><span class="p">:</span> <span class="kt">UITableViewCell</span> <span class="p">{</span> <span class="c1">// set up views }</span>
<span class="kd">extension</span> <span class="kt">AuthorCell</span><span class="p">:</span> <span class="kt">ConfigurableCell</span> <span class="p">{</span>
  <span class="k">var</span> <span class="nv">identifier</span><span class="p">:</span> <span class="kt">String</span> <span class="p">{</span> <span class="k">return</span> <span class="s">"AuthorCell"</span> <span class="p">}</span>
  <span class="kd">func</span> <span class="nf">configure</span><span class="p">(</span><span class="k">for</span> <span class="nv">object</span><span class="p">:</span> <span class="kt">Author</span><span class="p">,</span> <span class="n">at</span> <span class="nv">indexPath</span><span class="p">:</span> <span class="kt">IndexPath</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">textLabel</span><span class="p">?</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">object</span><span class="o">.</span><span class="n">name</span>
    <span class="n">detailTextLabel</span><span class="p">?</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="s">"Born on: "</span> <span class="o">+</span> <span class="n">object</span><span class="o">.</span><span class="n">birthDateString</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="kd">class</span> <span class="kt">AuthorDataSource</span><span class="p">:</span> <span class="kt">ArrayDataSource</span><span class="o">&lt;</span><span class="kt">Author</span><span class="p">,</span><span class="kt">AuthorCell</span><span class="o">&gt;</span> <span class="p">{</span>
  <span class="k">override</span> <span class="kd">func</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">super</span><span class="o">.</span><span class="nf">setup</span><span class="p">()</span>

    <span class="n">tableView</span><span class="o">.</span><span class="n">rowHeight</span> <span class="o">=</span> <span class="kt">UITableViewAutomaticDimension</span>
    <span class="n">tableView</span><span class="o">.</span><span class="n">estimatedRowHeight</span> <span class="o">=</span> <span class="mi">55</span>
  <span class="p">}</span>
  <span class="kd">func</span> <span class="nf">tableView</span><span class="p">(</span><span class="n">_</span> <span class="nv">tableView</span><span class="p">:</span> <span class="kt">UITableView</span><span class="p">,</span> <span class="n">viewForHeaderInSection</span> <span class="nv">section</span><span class="p">:</span> <span class="kt">Int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">UIView</span><span class="p">?</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">headerView</span> <span class="o">=</span> <span class="kt">UIView</span><span class="p">()</span>
    <span class="c1">// setup headerView</span>
    <span class="k">return</span> <span class="n">headerView</span>
  <span class="p">}</span>
  <span class="kd">func</span> <span class="nf">tableView</span><span class="p">(</span><span class="n">_</span> <span class="nv">tableView</span><span class="p">:</span> <span class="kt">UITableView</span><span class="p">,</span> <span class="n">heightForHeaderInSection</span> <span class="nv">section</span><span class="p">:</span> <span class="kt">Int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">CGFloat</span> <span class="p">{</span>
    <span class="k">return</span> <span class="mi">45</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="kd">class</span> <span class="kt">AuthorTableViewController</span><span class="p">:</span> <span class="kt">UIViewController</span> <span class="p">{</span>
  <span class="k">let</span> <span class="nv">tableView</span> <span class="o">=</span> <span class="kt">UITableView</span><span class="p">(</span><span class="nv">frame</span><span class="p">:</span> <span class="kt">CGRect</span><span class="o">.</span><span class="n">zero</span><span class="p">,</span> <span class="nv">style</span><span class="p">:</span> <span class="o">.</span><span class="n">plain</span><span class="p">)</span>
  <span class="k">var</span> <span class="nv">dataSource</span><span class="p">:</span> <span class="kt">AuthorDataSource</span><span class="o">!</span>

  <span class="k">override</span> <span class="kd">func</span> <span class="nf">viewDidLoad</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">super</span><span class="o">.</span><span class="nf">viewDidLoad</span><span class="p">()</span>
    <span class="k">let</span> <span class="nv">authors</span> <span class="o">=</span> <span class="kt">APIClass</span><span class="o">.</span><span class="nf">magicMethodThatGetsAuthors</span><span class="p">()</span>
    <span class="n">dataSource</span> <span class="o">=</span> <span class="kt">AuthorDataSource</span><span class="p">(</span><span class="nv">tableView</span><span class="p">:</span> <span class="n">tableView</span><span class="p">,</span> <span class="nv">array</span><span class="p">:</span> <span class="n">authors</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p>And that’s it! With various other subclasses/protocols added in, code reuse can be further expanded upon. A further step is to make the <code class="highlighter-rouge">UIViewController</code> itself generic. Though, I have to admit, maximizing code reuse can be an addiction that sometimes Swift’s compiler can’t keep up with. I’ve noticed a few times that extensively generic view controllers utilizing generic properties can causes it to fail without any error in the code. But hopefully that’s all fixed by the time Swift 4 comes out, though I’m not getting my hopes too high.</p>

<p>I also want to note that my biggest reference for this post was Objc.io’s Core Data book. It introduced me to some of these patterns. I’ve since moved onto using Realm for all my local storage purposes, but that book had some really fascinating Swift code.</p>

  </div>

</article>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading">Nathan Lanza</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li>Nathan Lanza</li>
          <li><a href="mailto:nathan@lanza.io">nathan@lanza.io</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/nathanlanza"><span class="icon icon--github"><svg viewBox="0 0 16 16"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">nathanlanza</span></a>

          </li>
          

          
          <li>
            <a href="https://twitter.com/nlanzaio"><span class="icon icon--twitter"><svg viewBox="0 0 16 16"><path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/></svg>
</span><span class="username">nlanzaio</span></a>

          </li>
          
        </ul>
      </div>

      <div class="footer-col footer-col-3">
        <p>Somehwere I can write about Swift, iOS and quantum field theory...</p>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
